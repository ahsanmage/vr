var EM_Slider=Class.create();EM_Slider.prototype={initialize:function(t){var i=Object.extend({min:0,max:0,from:0,to:0,query:"",valTpl:"",fromHandle:"from",toHandle:"to",track:"track",spans:["range"]},t||{});this.config=i,this.control=new Control.Slider([i.fromHandle,i.toHandle],i.track,{range:$R(i.min,i.max),sliderValue:[i.from,i.to],restricted:!0,spans:i.spans,onSlide:this.onSlide.bind(this),onChange:this.onChange.bind(this)}),this.onSlide([i.from,i.to])},reinit:function(){this.control.dispose(),this.initialize(this.config)},onSlide:function(t){var i,n;i=this.formatValue(Math.round(t[0])),n=this.formatValue(Math.round(t[1])),$("from-val").update(i),$("to-val").update(n)},onChange:function(t){var i,n,o;if(i=Math.round(t[0]),n=Math.round(t[1]),i!=this.config.from||n!=this.config.to){var o=this.getQueryString(i,n);em_layer.update(o)}},formatValue:function(t){return this.config.valTpl.replace("_value_",t)},getQueryString:function(t,i){return t==this.config.min&&i==this.config.max?this.config.removeUrl:this.config.query.replace("_from_",t).replace("_to_",i)}};