!function(a){function t(t){var e=(parseFloat(t.height())/2,parseFloat(t.width())/2),o=a(window).width()/2,n=(a(window).height()/2,o-e);a(t).css({top:"10px",left:Math.round(n)+"px"})}a.emAjaxWishList=function(e){var o=a(e),n=o.attr("href");o.init=function(){-1!=n.indexOf("wishlist/index/add")&&(n=n.replace("wishlist/index/add","themeframework/ajaxaddto/wishlist"),n+="isAjax/1",o.attr("href",n),o.doClick())},o.doClick=function(){var e,d=a("#bg_fade_color"),i=o.attr("onclick");o.attr("onclick",""),o.bind("click",function(r){void 0!==typeof i&&i!==!1&&("undefined"!=typeof productAddToCartForm&&productAddToCartForm.submit?(e=a("#product_addtocart_form").serialize(),e+="&isAjax=1"):"undefined"!=typeof qs_productAddToCartForm&&qs_productAddToCartForm.submit&&(e=a("#qs_product_addtocart_form").serialize(),e+="&isAjax=1")),d.css({opacity:"0.5",display:"block"}),a("#ajaxaddto_compareLink").hide();var c=a("#addtoContainer");t(c),a(c).show(),a("#ajaxaddto_loading").show(),a.ajax({url:n,data:e,dataType:"json",type:"post",success:function(t){a("#ajaxaddto_loading").hide(),a("#ajaxaddto_content").show(),a("#ajaxaddto_login_link").show(),0==t.status?a("#ajaxaddto_image").append(t.message):(a("#ajaxaddto_image").append(t.message),a(".em-links-wishlist").replaceWith(t.toplink),a(".block-wishlist").replaceWith(t.sidebar));var e=EM.SETTING.AJAXCART_AUTOCLOSE;e>0&&(a(".setcountdown").html("&nbsp;&nbsp;("+e+")"),o.em_countdown=setInterval(function(){return e-=1,0>=e?(clearInterval(o.em_countdown),d.css({opacity:"0",display:"none"}),a("#addtoContainer").hide(),a("#ajaxaddto_image").html(""),a("#ajaxaddto_loading").hide(),a("#ajaxaddto_content").hide(),a(".setcountdown").html(""),void 0):(a(".setcountdown").html("&nbsp;&nbsp;("+e+")"),void 0)},1e3)),a("#ajaxaddto_closeLink").click(function(t){t.preventDefault(),clearInterval(o.em_countdown),d.css({opacity:"0",display:"none"}),a("#addtoContainer").hide(),a("#ajaxaddto_image").html(""),a("#ajaxaddto_loading").hide(),a("#ajaxaddto_content").hide()})}}),r.preventDefault()})},o.init()},a.emAjaxCompare=function(e,o){var n={sidebarSelector:".block-compare"},d=a("#bg_fade_color"),i=a.extend({},n,o),r=(a(i.sidebarSelector),a(e));r.init=function(){var e=r.attr("href");-1!=e.search("catalog/product_compare/add")&&(e=e.replace("catalog/product_compare/add","themeframework/ajaxaddto/compare"),e.indexOf("?")&&(e=e.split("?")[0]),window.location.href.match("https://")&&!e.match("https://")&&(e=e.replace("http://","https://")),window.location.href.match("http://")&&!e.match("http://")&&(e=e.replace("https://","http://")),e+="isAjax/1",r.attr("href",e)),a(this).unbind("click"),a(this).bind("click",function(n){n.preventDefault();var c=(a(this).attr("href"),a("#addtoContainer"));t(c),a(c).show(),a("#ajaxaddto_login_link").hide(),a("#ajaxaddto_loading").show(),d.css({opacity:"0.5",display:"block"}),a.ajax({url:e,dataType:"json",success:function(t){a("#ajaxaddto_loading").hide(),a("#ajaxaddto_content").show(),0==t.status?a("#ajaxaddto_image").append(t.message):(a("#ajaxaddto_image").append(t.message),a("#ajaxaddto_compareLink").show(),a(i.sidebarSelector).replaceWith(t.sidebar));var e=EM.SETTING.AJAXCART_AUTOCLOSE;e>0&&(a(".setcountdown").html("&nbsp;&nbsp;("+e+")"),r.em_ajc_counter=setInterval(function(){return e-=1,0>=e?(clearInterval(r.em_ajc_counter),d.css({opacity:"0",display:"none"}),a("#addtoContainer").hide(),a("#ajaxaddto_image").html(""),a("#ajaxaddto_loading").hide(),a("#ajaxaddto_content").hide(),a("#ajaxaddto_compareLink").hide(),a(".setcountdown").html(""),void 0):(a(".setcountdown").html("&nbsp;&nbsp;("+e+")"),void 0)},1e3)),new a.emAjaxRemoveCompare(o)}}),a("#ajaxaddto_closeLink").click(function(t){t.preventDefault(),clearInterval(r.em_ajc_counter),d.css({opacity:"0",display:"none"}),a("#addtoContainer").hide(),a("#ajaxaddto_image").html(""),a("#ajaxaddto_loading").hide(),a("#ajaxaddto_content").hide()})})},r.init()},a.emAjaxRemoveCompare=function(e){function o(o){var d=a("#bg_fade_color"),i=a("#addtoContainer");t(i),a(i).show(),a("#ajaxaddto_login_link").hide(),a("#ajaxaddto_loading").show(),d.css({opacity:"0.5",display:"block"}),a.ajax({url:o,dataType:"json",success:function(t){a("#ajaxaddto_loading").hide(),a("#ajaxaddto_content").show(),0==t.status?a("#ajaxaddto_image").append(t.message):(a("#ajaxaddto_image").append(t.message),a(n).replaceWith(t.sidebar));var o=EM.SETTING.AJAXCART_AUTOCLOSE;a(".setcountdown").html("&nbsp;&nbsp;("+o+")"),em_countdown=setInterval(function(){return o-=1,0>=o?(clearInterval(em_countdown),d.css({opacity:"0",display:"none"}),a("#addtoContainer").hide(),a("#ajaxaddto_image").html(""),a("#ajaxaddto_loading").hide(),a("#ajaxaddto_content").hide(),a(".setcountdown").html(""),void 0):(a(".setcountdown").html("&nbsp;&nbsp;("+o+")"),void 0)},1e3),new a.emAjaxRemoveCompare(e)}}),a("#ajaxaddto_closeLink").click(function(t){t.preventDefault(),clearInterval(em_countdown),d.css({opacity:"0",display:"none"}),a("#addtoContainer").hide(),a("#ajaxaddto_image").html(""),a("#ajaxaddto_loading").hide(),a("#ajaxaddto_content").hide()})}var n=a(e.sidebarSelector);n.initRemoveCompareLink=function(){var t=a(n);t.find("a.btn-remove").each(function(){var t=a(this).attr("href");if(-1!=t.search("catalog/product_compare/remove")){var e=t.search("catalog/product_compare/remove/"),n=(t.substr(0,e),t.search("/product/")+9),d=t.search("/uenc/"),i=t.substr(n,d-n);t=urlsite+"index.php/themeframework/ajaxaddto/removeCompare/product/"+i,t.indexOf("?")&&(t=t.split("?")[0]),window.location.href.match("https://")&&!t.match("https://")&&(t=t.replace("http://","https://")),window.location.href.match("http://")&&!t.match("http://")&&(t=t.replace("https://","http://")),a(this).attr("href",t)}a(this).attr("onclick",""),a(this).unbind("click"),a(this).bind("click",function(t){t.preventDefault();var e=confirm(Translator.translate("Are you sure you would like to remove this item from the compare products?"));if(0!=e){var n=a(this).attr("href");o(n)}})});var e=a('a[href*="catalog/product_compare/clear"]');if("undefined"!=typeof e){var d=e.attr("href");d=urlsite+"index.php/themeframework/ajaxaddto/clearCompare",d.indexOf("?")&&(d=d.split("?")[0]),window.location.href.match("https://")&&!d.match("https://")&&(d=d.replace("http://","https://")),window.location.href.match("http://")&&!d.match("http://")&&(d=d.replace("https://","http://")),e.attr("onclick",""),e.unbind("click"),e.attr("href",d),e.bind("click",function(t){t.preventDefault();var e=confirm(Translator.translate("Are you sure you would like to remove all products from your comparison?"));if(0!=e){var n=a(this).attr("href");a("#ajaxaddto_compareLink").hide(),o(n)}})}},n.initRemoveCompareLink(e)},a.fn.emAjaxWishList=function(){return this.each(function(){new a.emAjaxWishList(this)})},a.fn.emAjaxCompare=function(t){return new a.emAjaxRemoveCompare(t),this.each(function(){new a.emAjaxCompare(this,t)})},a(window).resize(a.throttle(250,function(){var e=a("#addtoContainer");e.is(":visible")&&"none"!=e.css("display")&&t(e)}))}(jQuery);